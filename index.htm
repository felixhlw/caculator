<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/css.css">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/all.min.css">
    <link rel="stylesheet" href="./css/animate.css">

</head>

<body>

    <div class="container">
        <div class="row align-items-center justify-content-center" id="row">
            <table class="m-auto " id="calc">
                <tr id="top">
                    <td colspan=4 id="input">
                        <div id="date" class="py-0">


                        </div>



                        <div id="list" class="w-100 text-break">&nbsp;</div>
                        <div id="result" class="w-100 text-break">0</div>
                    </td>
                </tr>
                <tr>
                    <td class="op " id="clear">
                        <div class=" rounded-circle op-circle">
                            C</div>
                    </td>
                    <td id="butn1" class="op">
                        <div class="rounded-circle op-circle">
                            <i class="fas fa-divide"></i></div>
                    </td>
                    <td id="butn2" class="op">
                        <div class="rounded-circle op-circle">
                            <i class="fas fa-times"></i></div>
                    </td>
                    <td id="butn3" class="op">
                        <div class="rounded-circle op-circle">
                            <i class="fas fa-minus"></i></div>
                    </td>
                </tr>
                <tr>
                    <td><div class="digits">7</div>
                    </td>
                    <td><div class="digits">8</div>
                    </td>
                    <td><div class="digits">9</div>
                    </td>


                    <td rowspan=2 id="butn4">
                        <div class="op-square1">
                                <i class="fas fa-plus"></i>
                        </div>
                    </td>
            </div>
    </div>
    </tr>
    <tr>
        <td><div class="digits">4</div></td>
        <td><div class="digits">5</div></td>
        <td><div class="digits">6</div></td>
    </tr>
    <tr>
        <td><div class="digits">1</div></td>
        <td><div class="digits">2</div></td>
        <td><div class="digits">3</div></td>


        <td rowspan=2 id="butn5">
            <div class="op-square2 ">
                    <i class="fas fa-equals"></i>
                    </div>
        </td>
        </div>
        </div>
    </tr>
    <tr>
        <td><div class="digits">0</div></td>
        <td><div class="digits">.</div></td>
        <td>&nbsp;</td>

        </td>
    <tr>
        <td colspan=4 class="bottom"></td>
    </tr>



    </table>
    </div>

    </div>
    <script src="./js/jquery-3.4.1.min.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>
    <script src="./js/wow.min.js"></script>
    <script>
                           
        let Today=new Date();
        let date=document.getElementById("date");                 
        date.innerText=(Today.getFullYear()+ " 年 " + (Today.getMonth()+1) + " 月 " + Today.getDate() + " 日");

        input = document.getElementById("input");
        list = document.getElementById("list");
        result = document.getElementById("result");
        td = document.querySelectorAll("#calc td");

        operator = ["/", "*", "-", "+", "Enter", ".", "Delete"];

        for (let i = 0; i < td.length; i++) { //限制i數字範圍為所有td的數量
            if (td[i].id != "input") {
                td[i].onclick = () => {

                    if (td[i].id == "butn1") {
                        console.log("1234");
                        addNumber("/");

                    } else if (td[i].id == "butn2") {
                        console.log("2234");
                        addNumber("*");

                    } else if (td[i].id == "butn3") {
                        console.log("3234");
                        addNumber("-");

                    } else if (td[i].id == "butn4") {
                        console.log("4234");
                        addNumber("+");

                    } else if (td[i].id == "butn5") {
                        console.log("5234");
                        addNumber("=");

                    } else {
                        addNumber(td[i].innerText);
                    }
                }

            }
        }
        document.onkeydown = (event) => {
            /*     console.log(event.key);  */
            key = event.key;
            if (!isNaN(key) || operator.includes(key)) {
                addNumber(key);
                if (key == "Delete") {
                    list.innerHTML = "&nbsp;";
                    result.innerText = "0";
                }
            }
        }

        addNumber = (number) => {
            if (number == "C") {
                list.innerHTML = "&nbsp;";
                result.innerText = "0";
            } else if (number == "=" || number == "Enter") {
                r = eval(list.innerText);
                if (Number.isInteger(r)) {
                    result.innerText = r;
                } else {
                    result.innerText = eval(r).toFixed(4);
                }

            } else {
                if (input.innerText == "0") {
                    list.innerText = number;
                } else {
                    list.innerText += number;
                }
            }
        }
    </script>

</body>

</html>